---
layout: oldforum_layout
title: location.inc.php patch to match docs - OpenNetAdmin Forum Archive
keywords: ona opennetadmin forum archive
description: Old OpenNetAdmin forum archive topic page location.inc.php patch to match docs OpenNetAdmin Forum Archive
---
   <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner" style="max-width: 730px">


<div class="breadcrumb">
	<p><a href="../index.html">Forums Archive Home</a> &raquo; <a href="index.html">General Discussion</a></p>
</div>

<h1>location.inc.php patch to match docs</h1>

<div class="post ">
	<div class="info">
		<p class="poster">yshollander</p>
		<p class="dt">15-07-2009 10:57:04</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	Patch to make the usage info match reality.<br />
<br />
It's zip_code, not zip, and the code requires all fields be filled in.  I autopopulate the optional ones with &quot;unknown&quot; if they're not set.<br />
<br />
--- location.inc.php.orig       2009-07-15 12:45:19.000000000 -0400<br />
+++ location.inc.php    2009-07-15 12:52:41.000000000 -0400<br />
@@ -54,7 +54,7 @@<br />
     address=STRING<br />
     city=STRING<br />
     state=STRING<br />
-    zip=NUMBER<br />
+    zip_code=NUMBER<br />
     latitude=STRING<br />
     longitude=STRING<br />
     misc=STRING<br />
@@ -96,6 +96,34 @@<br />
     }<br />
     printmsg(&quot;DEBUG =&gt; ID for new location: $id&quot;, 3);<br />
 <br />
+    if ($options['address'] == &quot;&quot;)  {<br />
+       $options['address'] = &quot;unknown&quot;;<br />
+    }<br />
+<br />
+    if ($options['city'] == &quot;&quot;)  {<br />
+       $options['city'] = &quot;unknown&quot;;<br />
+    }<br />
+<br />
+    if ($options['state'] == &quot;&quot;)  {<br />
+       $options['state'] = &quot;unknown&quot;;<br />
+    }<br />
+<br />
+    if ($options['zip_code'] == &quot;&quot;)  {<br />
+       $options['zip_code'] = &quot;unknown&quot;;<br />
+    }<br />
+<br />
+    if ($options['latitude'] == &quot;&quot;)  {<br />
+       $options['latitude'] = &quot;unknown&quot;;<br />
+    }<br />
+<br />
+    if ($options['longitude'] == &quot;&quot;)  {<br />
+       $options['longitude'] = &quot;unknown&quot;;<br />
+    }<br />
+<br />
+    if ($options['misc'] == &quot;&quot;)  {<br />
+       $options['misc'] = &quot;unknown&quot;;<br />
+    }<br />
+<br />
     // Add the record<br />
     list($status, $rows) =<br />
         db_insert_record(	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">Matt</p>
		<p class="dt">15-07-2009 13:02:19</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	Thanks much for the patch.  I found a few more references of zip/zip_code that I fixed as well.<br />
<br />
I did not do the &quot;unknown&quot; default value thing.  only reference and name should be required but I had indicated in the GUI edit form that the rest were required.  I've updated that so only the two fields are indicated as required.	<!-- END MESSAGE -->
	</div>
</div>
</section></div>

