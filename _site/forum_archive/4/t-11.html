<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="AUTHOR" content="matt@opennetadmin.com">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="KEYWORDS" content="ona opennetadmin forum archive">
    <meta name="description" content="Old OpenNetAdmin forum archive topic page problem diff'ing configs OpenNetAdmin Forum Archive">


    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/stylesheet.css">

    <title>problem diff'ing configs - OpenNetAdmin Forum Archive</title>
<script type="text/javascript" src="../jquery.js"></script> <script type="text/javascript" src="../jquery.tablesorter.js"></script> <script type="text/javascript" src="../forum.js"></script>
  </head>

  <body onload="load('forum')">
    <a id="forkme_banner" href="https://github.com/opennetadmin"></a>
    <a id="fishes" href="http://www.christiananswers.net/gospel/home.html"><img style="opacity: 0.3;border: 0 none;" src="/images/fish.gif" height="15"></a>
<form id="donatebutton" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <h1 id="project_title">OpenNetAdmin</h1>
          <h2 id="project_tagline">Track. Automate. Configure.</h2>
          <center>
            <a class="header_link" href="/">Home</a>
            <a class="header_link" href="/features.html">Features</a>
            <a class="header_link" href="/community.html">Community</a>
            <a class="header_link" href="/develop.html">Develop</a>
          </center>
          <section id="downloads">
            <a class="tar_download_link" href="https://github.com/opennetadmin/ona/tarball/current">Download this project as a tar.gz file</a>
          </section>
        </header>
    </div>

       <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner" style="max-width: 730px">


<div class="breadcrumb">
	<p><a href="../index.html">Forums Archive Home</a> &raquo; <a href="index.html">General Discussion</a></p>
</div>

<h1>problem diff'ing configs</h1>

<div class="post ">
	<div class="info">
		<p class="poster">tmyoungjr</p>
		<p class="dt">17-04-2009 11:12:47</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	i've uploaded configs to a single host (3 configs to be exact)<br />
<br />
the upload seems to go fine<br />
i see three configs under said host in the GUI<br />
<br />
i attempt to view a config or diff the configs and i get nothing.  by nothing i mean the GUI exists - theres an obvious place where the config should be shown but it is not.<br />
<br />
i have debug cranked up to 6 and am watching it as i make the request - but there are no errors or failures that i'm seeing.  any thoughts would be nice.	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">Matt</p>
		<p class="dt">17-04-2009 12:41:20</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	Hmm.. quite interesting.<br />
<br />
First off, I would try to do a &quot;dcm.pl -r config_display&quot; to see if the config will show up there with what you expect.<br />
<br />
When you have it in the GUI and you click the magnifying glass it should display the config file itself.  It should have a blue box that gives info on that configuration.  Do you see that blue box and no config? or no blue box at all either?<br />
<br />
Since there is no GUI (as you found based on the bug you opened) to maintain the config types, you would only have &quot;IOS_CONFIG&quot; and &quot;IOS_VERSION&quot; as an option unless you manually created your own.  Its possible when you added the configuration that there was a problem with the config type??<br />
<br />
I also assume that you DO see the configuration entries in the list but just nothing when you try to view/diff it?<br />
<br />
Nothing really solid yet to suggest other than the CLI display method.  Keep feeding me other details that you notice..	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">tmyoungjr</p>
		<p class="dt">17-04-2009 13:33:50</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	<q cite="&amp;quot;Matt&amp;quot;:nq4wode4">Hmm.. quite interesting.<br />
<br />
First off, I would try to do a &quot;dcm.pl -r config_display&quot; to see if the config will show up there with what you expect.<br />
</q><br />
<br />
yep sure does, here's an example :<br />
<br />
[tyoung@host dcm-v1.17]$ dcm.pl -r config_display config=1<br />
Use of uninitialized value in numeric eq (==) at /usr/lib/perl5/vendor_perl/5.8.8/IO/Socket/SSL.pm line 1185.<br />
CONFIG TEXT RECORD (1 of 1)<br />
  id                          1<br />
  configuration_type_id       1<br />
  host_id                     26                  (atl.7606.1.globalinx.com)<br />
  md5_checksum                6dbb622cdd73e9992156b04468c518de<br />
  config_body<br />
!<br />
! Last configuration change at 08:41:25 EDT Thu Mar 26 2009 by tmyoungjr<br />
! NVRAM config last updated at 08:41:27 EDT Thu Mar 26 2009 by tmyoungjr<br />
<br />
....cut most of config<br />
<br />
end<br />
  ctime                       2009-04-17 16:36:20<br />
  etime                       0000-00-00 00:00:00<br />
  config_type_name            IOS_CONFIG<br />
<br />
<br />
<q>When you have it in the GUI and you click the magnifying glass it should display the config file itself.  It should have a blue box that gives info on that configuration.  Do you see that blue box and no config? or no blue box at all either?<br />
</q><br />
<br />
when i click that magnifying glass i get a workspace with a loading type image - that never goes away.<br />
<br />
<q>Since there is no GUI (as you found based on the bug you opened) to maintain the config types, you would only have &quot;IOS_CONFIG&quot; and &quot;IOS_VERSION&quot; as an option unless you manually created your own.  Its possible when you added the configuration that there was a problem with the config type??</q><br />
<br />
as you see above its IOS_CONFIG and in the gui list it shows the same.<br />
<br />
<q>I also assume that you DO see the configuration entries in the list but just nothing when you try to view/diff it?</q><br />
<br />
correct<br />
<br />
<q>Nothing really solid yet to suggest other than the CLI display method.  Keep feeding me other details that you notice..</q></q></q></q></q></q>	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">tmyoungjr</p>
		<p class="dt">21-04-2009 14:00:17</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	any thoughts here matt?	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">Matt</p>
		<p class="dt">21-04-2009 14:14:40</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	Not a dang clue.. been pre-occupied with some things so I've honestly not put all 5 of my brain cells on the task.<br />
<br />
I've been unable to recreate the same issue.  It is possible I have fixed this since my last release.  Since it has been WAY to long since I've put out a release, I plan on doing one this weekend.  Hopefully that will fix your problem.<br />
<br />
In the mean time, when I run into issues where there is no obvious error message on screen or in logs I will do the following.<br />
<br />
From a cli try to execute the code and see if there are some sort of php errors being logged.  (if you dont already have a php error log generated, it might be good to have one on but thats usually best for development work.)  In this case I would try this command:<br />
<br />
<code>php /opt/ona/www/winc/display_config_text&#46;inc&#46;php</code><br />
<br />
If it goes to a prompt then thats not the problem.. If it spits out an error, it should say the line number that has the issue.<br />
<br />
Lets see where that gets us.....................</code>	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">tmyoungjr</p>
		<p class="dt">21-04-2009 14:20:06</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	<code>&#91;tyoung@ipplan ~&#93;$     php /opt/ona/www/winc/display_config_text&#46;inc&#46;php<br />
PHP Notice&#58;  Undefined variable&#58; window_name in /opt/ona/www/winc/display_config_text&#46;inc&#46;php on line 6<br />
PHP Notice&#58;  Undefined variable&#58; window_name in /opt/ona/www/winc/display_config_text&#46;inc&#46;php on line 7<br />
PHP Notice&#58;  Undefined index&#58;  host_id in /opt/ona/www/winc/display_config_text&#46;inc&#46;php on line 7<br />
&#91;tyoung@ipplan ~&#93;$</code><br />
<br />
<br />
buncha notices.  usually not problematic - depending on when those get defined its not a big deal (usually happens after a submit button or the like).  but again it really depends on the process flow</code>	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">Matt</p>
		<p class="dt">21-04-2009 14:24:31</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	hmm, no errors there.. those notices are normal.<br />
<br />
Not sure what the heck it is.. I'd say lets try the new release that I'm building and see if that fixes it.  If not, I'll dig in deeper.	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">tmyoungjr</p>
		<p class="dt">22-04-2009 06:24:35</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	So the updated file didn't cut it either.  I'll look forward to the next release and in the meantime keep working on a way to backup my routers automagically <!-- s:) --><img src="{SMILIES_PATH}/icon_e_smile.gif" alt=":)" title=":-)" /><!-- s:) -->   (at least until you release some of the fun utilities mentioned in the docs!)	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">tmyoungjr</p>
		<p class="dt">28-04-2009 07:26:30</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	so - using the most current release from Matt,<br />
<br />
I can now view and diff my configs without problem.  it is possible that there were escape characters killing the config view in the current stable release version - i cannot test that at the moment.	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">Matt</p>
		<p class="dt">28-04-2009 08:42:58</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	Well I have confirmed the problem is real CTRL-C characters.  Now I just need to get a workable solution.  I think I have a plan on it, just need to test.  <br />
<br />
Basically I'm going to store the file as is in the database.  My configs already have CTRL-M on each line so that is not an issue.  I'll just clean out the CTRL-C stuff before I try to print it via the browser.  Should fix the issue.	<!-- END MESSAGE -->
	</div>
</div>
</section></div>



<div align="center">
<script type="text/javascript"><!--
google_ad_client = "pub-2598149030041038";
//728x90_bugsfooter
google_ad_slot = "1568593938";
google_ad_width = 728;
google_ad_height = 90;
//--></script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>

    <!-- FOOTER  -->
    <div class="outer">
      <footer class="inner">
          <center>
 


          </center>
      </footer>
    </div>

          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script
%3E"));
          </script>

          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-361894-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>


