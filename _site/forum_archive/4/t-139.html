<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="AUTHOR" content="matt@opennetadmin.com">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="KEYWORDS" content="ona opennetadmin forum archive">
    <meta name="description" content="Old OpenNetAdmin forum archive topic page Slave DNS OpenNetAdmin Forum Archive">


    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/stylesheet.css">

    <title>Slave DNS - OpenNetAdmin Forum Archive</title>
<script type="text/javascript" src="../jquery.js"></script> <script type="text/javascript" src="../jquery.tablesorter.js"></script> <script type="text/javascript" src="../forum.js"></script>
  </head>

  <body onload="load('forum')">
    <a id="forkme_banner" href="https://github.com/opennetadmin"></a>
    <a id="fishes" href="http://www.christiananswers.net/gospel/home.html"><img style="opacity: 0.3;border: 0 none;" src="/images/fish.gif" height="15"></a>
<form id="donatebutton" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <h1 id="project_title">OpenNetAdmin</h1>
          <h2 id="project_tagline">Track. Automate. Configure.</h2>
          <center>
            <a class="header_link" href="/">Home</a>
            <a class="header_link" href="/features.html">Features</a>
            <a class="header_link" href="/community.html">Community</a>
            <a class="header_link" href="/develop.html">Develop</a>
          </center>
          <section id="downloads">
            <a class="tar_download_link" href="https://github.com/opennetadmin/ona/tarball/current">Download this project as a tar.gz file</a>
          </section>
        </header>
    </div>

       <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner" style="max-width: 730px">


<div class="breadcrumb">
	<p><a href="../index.html">Forums Archive Home</a> &raquo; <a href="index.html">General Discussion</a></p>
</div>

<h1>Slave DNS</h1>

<div class="post ">
	<div class="info">
		<p class="poster">synapse</p>
		<p class="dt">27-11-2009 05:49:35</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	How should I add a slave DNS which is outside my network, and provided by uplink provider? <br />
<br />
Now I can not add a slave DNS server, because I have to specify a domain name which exists in my own database. Ok, even if I would try to create a domain name for that server, I will be unable to add the type A record with IP outside of my networks.<br />
<br />
It's annoying that ONA thinks that it's cleverer then me. I would expect a checkbox that switches off checking the hostname or IP, to give me a change to add any record I need.	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">Matt</p>
		<p class="dt">28-11-2009 22:33:14</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	There are currently a few options.  <br />
<br />
1.  Add the domain, networks, ip addresses for the slave DNS server as if you did own it.  This does not hurt a thing and provides detailed tracking of its various elements.  Now, I do realize this is tedious as well as a potential management headache if the external system continually changes.<br />
2.  Add the slave zone definition into the header portion of the bind config that gets included into the configuration built from ONA.  This way you just manually maintain the zone definition and the zone file itself separately from anything ONA builds.  this is essentially the same thing you would do if ONA was not managing the configuration for you.  There are a TON of bind related configuration options that ONA does not support.  I fully expected those to be manually maintained in a configuration file that gets integrated with the parts ONA is handling.  (my current build bind process may not be fully cooked on making this all a easy thing to manage however.  it is possible however)<br />
<br />
<br />
At the moment ONA is trying to enforce its own basic rules around data storage and what is required to define DNS servers and zones.  That current implementation does not allow for the simple bypassing of these rules.<br />
<br />
I expect that it is possible to make a work around.  I'd have to spend some brain cycles on what it would take to bypass these rules without causing potential data issues.   This is similar to a few other situations.  At this point I would like to keep the rules intact and hopefully find a way to do what you need in a configurable way.  So admins etc or certain users could bypass the checks but the general user still needs to follow the basic rules.	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">andrewg</p>
		<p class="dt">29-06-2011 12:55:30</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	Is there any progress? Your DNS implementation is badly broken until this is fixed, as the problem also affects CNAME and MX records.	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">Matt</p>
		<p class="dt">01-07-2011 17:10:32</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	Andrew,<br />
<br />
First off, there has been no code changes to allow ONA to bypass the built in rules around how it stores the data.  <br />
<br />
I want to make sure that I clearly understand your goal.  Here is what I understand it to be:<br />
<br />
There is a domain, we'll call it slavedomain.com that is provided by an external entity.  You want your DNS server that is defined in ONA to be a slave to that domain and do an zone XFR from the external master?<br />
Basically you need this on your DNS server: <code><br />
zone &quot;slavedomain&#46;com&quot; in {<br />
  type slave;<br />
  file &quot;named-slavedomain&#46;com&quot;;<br />
  masters { 1&#46;2&#46;3&#46;4; 1&#46;2&#46;3&#46;5 };<br />
};<br />
</code><br />
<br />
If that is the case then I see where I should be able to make a fairly quick change.  If I allow you to specify a list of master IP addresses when defining the server/zone relationship then you could simply supply the value.  This would also apply to forward zones which are horribly broken in the system currently.<br />
<br />
In lue of me making any changes, you should be able to simply add the above zone definition into the file '/etc/named.conf-header' on your DNS server and it will just include it directly in.  That is where you would manually add other server level configurations that ONA does not currently support.<br />
<br />
When it comes to records such as CNAME or MX, you will have to either add the data to ONA (which there is nothing wrong with doing since you will be adding mostly the same data to the zone file anyway) or use the zone footer method where you create a file called 'named-{domainname}.footer' on your DNS server that contains whatever DNS resource records you wish.  I realize this is less than ideal as it is masked from being visible/manageable via ONA, but this is likely to not change as it will require far more work than I feel its worth at the moment.   Opinions could change over time however.<br />
<br />
Hopefully I've understood your senario properly.<br />
<br />
Thanks</code>	<!-- END MESSAGE -->
	</div>
</div>
<div class="post ">
	<div class="info">
		<p class="poster">andrewg</p>
		<p class="dt">04-07-2011 03:40:57</p>
	</div>
	<div class="msg">
	<!-- BEGIN MESSAGE -->
	Matt,<br />
<br />
It's actually the other way around - I want to have external slave servers for the zone data that I'm managing in ONA. To do this, I need to specify them as NS records within the domain itself. My email service is also managed externally, and I have several CNAMES pointing outside. In order to set these records up within ONA, I need to create fake subnets and domains, and store fake records in them in order to trick ONA into accepting them as valid targets. This method does not scale. I was also hoping to use DLZ, so the footer method does not apply.	<!-- END MESSAGE -->
	</div>
</div>
</section></div>



<div align="center">
<script type="text/javascript"><!--
google_ad_client = "pub-2598149030041038";
//728x90_bugsfooter
google_ad_slot = "1568593938";
google_ad_width = 728;
google_ad_height = 90;
//--></script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>

    <!-- FOOTER  -->
    <div class="outer">
      <footer class="inner">
          <center>
 


          </center>
      </footer>
    </div>

          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script
%3E"));
          </script>

          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-361894-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>


